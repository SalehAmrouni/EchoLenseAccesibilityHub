<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/css/style.css">
    <title>ECHOLENS</title>
</head>
<body>
    <div class="top-nav">
        <!-- Narrator toggle removed: narrator is always on -->
    </div>

    <div id="screen-splash" class="glass-card">
        <h1 class="hero-title">ECHOLENS</h1>
        <button class="pill-btn" onclick="nav('hub')" onmouseenter="say('Initialize System')">
            INITIALIZE SYSTEM
        </button>
    </div>

    <div id="screen-hub" class="glass-card" style="display:none;">
        <button class="pill-btn" onclick="nav('vision')" onmouseenter="say('Vision Assistance')">
            VISION ASSISTANCE
        </button>
        <button class="pill-btn" onclick="nav('hearing')" onmouseenter="say('Hearing Assistance')">
            HEARING ASSISTANCE
        </button>
    </div>

    <div id="screen-vision" class="glass-card" style="display:none;">
        <img id="stream" src="" style="width:100%; border-radius:25px; border:2px solid var(--blue);">
        <h2 id="vision-text">SCANNING...</h2>
        <button class="pill-btn" onclick="nav('hub')" onmouseenter="say('Back to Hub')">BACK</button>
    </div>

    <div id="screen-hearing" class="glass-card" style="display:none;">
        <button id="spatial-toggle-btn" class="pill-btn" onclick="syncBT()" onmouseenter="say('Sync or Pause Spatial Audio')">
            SYNC BLUETOOTH
        </button>
        <button class="pill-btn" onclick="nav('captions')" onmouseenter="say('Speech to Text')">
            SPEECH TO TEXT
        </button>
        <div style="margin-top:40px;">
            <h3 style="color:var(--blue)">AMBIENT GAIN BOOST</h3>
            <input type="range" min="1" max="100" value="16" class="volume-slider" oninput="adjustVolume(this.value)" onmouseenter="say('Volume Slider')">
            <h1 id="gain-display">100%</h1>
        </div>
        <button class="pill-btn" onclick="nav('hub')" onmouseenter="say('Back to Hub')">BACK</button>
    </div>

    <div id="screen-captions" class="glass-card" style="display:none;">
        <div style="display:flex; justify-content: space-between; gap: 20px; margin-bottom: 20px;">
            <div style="width:48%;">
                <span style="color: var(--blue); font-weight: bold; font-size: 0.9rem; display:block; margin-bottom:5px;">CONVERSATION IN:</span>
                <select id="lang-source" class="pill-btn" style="width:100%; min-width:unset; padding:15px;" onmouseenter="say('Select source language')"></select>
            </div>
            <div style="width:48%;">
                <span style="color: var(--blue); font-weight: bold; font-size: 0.9rem; display:block; margin-bottom:5px;">TRANSLATE TO:</span>
                <select id="lang-target" class="pill-btn" style="width:100%; min-width:unset; padding:15px;" onmouseenter="say('Select translation language')"></select>
            </div>
        </div>

        <button id="cap-toggle" class="pill-btn" style="width: 100%; margin-bottom: 20px;" onclick="toggleCaptions()" onmouseenter="say('Start or stop talking')">
            START TALKING
        </button>

        <div id="wall" class="caption-wall"></div>

        <div style="display:flex; gap: 15px; justify-content:center;">
            <button class="pill-btn" style="flex: 1; min-width:unset; background:#222; color:white;" onclick="nav('hearing')" onmouseenter="say('Back')">BACK</button>
            <button class="pill-btn" style="flex: 1; min-width:unset; background: rgba(255,255,255,0.1); color: white;" onclick="clearCaptions()" onmouseenter="say('Clear history')">CLEAR</button>
            <button class="pill-btn" style="flex: 1.5; min-width:unset; border:1px solid gold;" onclick="exportMinutes()" onmouseenter="say('Export report')">EXPORT REPORT</button>
        </div>
    </div>

    <script src="/static/js/narrator.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/vision_module.js"></script>
    <script src="/static/js/hearing_module.js"></script>
</body>
</html>